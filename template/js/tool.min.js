/*
 * @Description: 公共JavaScript工具
 * @version: 0.1.0
 * @Author: liejiayong(809206619@qq.com)
 * @Date: 2023-01-31 14:11:18
 * @LastEditors: liejiayong(809206619@qq.com)
 * @LastEditTime: 2023-03-24 09:44:13
 * @FilePath: \贪玩手游_愚人节活动_猜拳游戏_一部(手游)业务支撑{专题_h5}-20230322160000\js\tool.min.js
 * 可以输入预定的版权声明、个性签名、空行等
 */
/*! Promise polyfill  */
/* prettier-ignore */ !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}function t(e){return new this(function(t,n){function r(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var f=n.then;if("function"==typeof f)return void f.call(n,function(t){r(e,t)},function(n){o[e]={status:"rejected",reason:n},0==--i&&t(o)})}o[e]={status:"fulfilled",value:n},0==--i&&t(o)}if(!e||"undefined"==typeof e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);for(var i=o.length,f=0;o.length>f;f++)r(f,o[f])})}function n(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}function r(e){var t=this;return new t(function(r,o){if(!e||"undefined"==typeof e.length)return o(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return o();for(var f=[],u=0;i.length>u;u++)try{t.resolve(i[u]).then(r)["catch"](function(e){f.push(e),f.length===i.length&&o(new n(f,"All promises were rejected"))})}catch(c){o(c)}})}function o(e){return!(!e||"undefined"==typeof e.length)}function i(){}function f(e){if(!(this instanceof f))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],s(e,this)}function u(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,f._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(o){return void a(t.promise,o)}c(t.promise,r)}else(1===e._state?c:a)(t.promise,e._value)})):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof f)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void s(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,l(e)}catch(r){a(e,r)}}function a(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&f._immediateFn(function(){e._handled||f._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;n>t;t++)u(e,e._deferreds[t]);e._deferreds=null}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,a(t,e))})}catch(r){if(n)return;n=!0,a(t,r)}}n.prototype=Error.prototype;var d=setTimeout;f.prototype["catch"]=function(e){return this.then(null,e)},f.prototype.then=function(e,t){var n=new this.constructor(i);return u(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},f.prototype["finally"]=e,f.all=function(e){return new f(function(t,n){function r(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(t){r(e,t)},n)}i[e]=o,0==--f&&t(i)}catch(c){n(c)}}if(!o(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);for(var f=i.length,u=0;i.length>u;u++)r(u,i[u])})},f.any=r,f.allSettled=t,f.resolve=function(e){return e&&"object"==typeof e&&e.constructor===f?e:new f(function(t){t(e)})},f.reject=function(e){return new f(function(t,n){n(e)})},f.race=function(e){return new f(function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;i>r;r++)f.resolve(e[r]).then(t,n)})},f._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){d(e,0)},f._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=f:(p.Promise.prototype["finally"]||(p.Promise.prototype["finally"]=e),p.Promise.allSettled||(p.Promise.allSettled=t),p.Promise.any||(p.Promise.any=r))});
/*! classList.js polyfill  */
/* prettier-ignore */ "document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/* JTool tool */
/* prettier-ignore */ ~function(q,r){var f=q._JTool_||{};f.define=function(e,d){e=e.split(".");var a=this,b=this,c=0,g;"_JTool_"===e[0]&&(e=e.slice(1));if("define"!==e[0]&&"module"!==e[0]){for(g=e.length;c<g;c++)"undefined"===typeof b[e[c]]&&(b[e[c]]={}),a=b,b=b[e[c]];d&&(a[e[--c]]=d(f));return this}};f.module=function(){var e=[].slice.call(arguments),d=e.pop();e=e[0]&&e[0]instanceof Array?e[0]:e;for(var a=[],b,c=0,g=e.length,h,l,k;c<g;){if("string"===typeof e[c]){h=this;b=e[c].replace(/^_JTool_\./,"").split(".");l=0;
for(k=b.length;l<k;l++)h=h[b[l]]||!1;a.push(h)}else a.push(e[c]);c++}d.apply(null,a)};Object.defineProperties(f,{define:{configurable:!1,writable:!1,enumerable:!0},module:{configurable:!1,writable:!1,enumerable:!0}});f.define("document",function(e){return r.documentElement.body||r.body});f.define("$",function(){return jQuery});f.define("validate",function(e){var d=function(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"};e=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?
Number.isNaN:function(a){return a!==a}}();return{is:d,isFunction:function(a){return d(a,"Function")},isArray:function(a){return d(a,"Array")},isBoolean:function(a){return d(a,"Boolean")},isNumber:function(a){return d(a,"Number")},isString:function(a){return"string"===typeof a||a instanceof String},isObject:function(a){return d(a,"Object")},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:e,isPromise:function(a){return!!a&&("object"===typeof a||"function"===typeof a)&&
"function"===typeof a.then},isNode:function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType}}});f.define("window",function(e){return{fixed:function(d){(document.querySelector(d)||document.getElementsByTagName("body")[0]).style.overflow="hidden"},reset:function(d){(document.querySelector(d)||document.getElementsByTagName("body")[0]).style.overflow=""}}});f.define("extend",function(e){return function(){var d=Array.prototype.slice.call(arguments),a=d[0];d=d.slice(1);a=e.validate.isObject(a)?
a:{};d.forEach(function(b){b=e.validate.isObject(b)?b:{};for(var c in b)e.validate.isString(b[c])?a[c]=e.utils.filterScript(b[c]):a[c]=b[c]});return a}});f.define("utils.deepClone",function(e){function d(a){var b;if(!e.validate.isObject(a))return a;if(e.validate.isArray(a)){var c=[];for(b=a.length;b--;)a.hasOwnProperty(b)&&(e.validate.isObject(a[b])?c[b]=d(a[b]):c[b]=a[b])}else for(b in c={},a)a.hasOwnProperty(b)&&(e.validate.isObject(a[b])?c[b]=d(a[b]):c[b]=a[b]);return c}return d});f.define("utils.arr2str",
function(e){return function(d){if(f.validate.isArray(d))return d.map(function(a){return" "+a+" "}).join("")}});f.define("utils.tagString",function(e){function d(b){return e.validate.isUndefined(b)?"":' class="'+(e.validate.isArray(b)?b.join(" "):b)+'"'}function a(b){var c="";b=e.validate.isObject(b)?b:{};for(var g in b){var h=b[g];b.hasOwnProperty(g)&&!e.validate.isUndefined(b[g])&&(c+=" "+g+'="'+h+'"')}return c}return function l(c,g,h){g=e.validate.isObject(g)?g:{class:[],style:"",attr:{}};h=h||
"";var k="";"object"===typeof h?(e.validate.isArray(h)&&h.forEach(function(m){k+=l(m.type,m.props,m.children)}),e.validate.isObject(h)&&(k+=l(h.type,h.props,h.children))):k+=h;h=a(g.attr);var n=d(g.class);g=g.style||"";n&&(h+=n);g&&(h+=' style="'+g+'"');return e.utils.tplFormat("<{{type}}{{attr}}>{{children}}</{{type}}>",{type:c,attr:h,children:k})}});f.define("utils.on",function(e){return function(d,a,b,c){function g(l){var k=l||window.event,n=k.currentTarget;k=k.target||window.srcElement;Element.prototype.matches||
(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(m){var p=this.document||this.ownerElement;m;for(i=p.length;0<=--i&&p.item(i)!==this;)return-1<i});for(;k!==n;)k.matches(b)&&c.call(k,Array.prototype.slice.call(arguments)),k=k.parentNode}var h=a.split(" ").length;h&&1===h?document.querySelector(d).addEventListener(a,g):1<h&&a.split(" ").forEach(function(l){Array.prototype.slice.call(document.querySelectorAll(d)).forEach(function(k){k.addEventListener(l,
g)})})}});f.define("utils.debounce",function(e){return function(d,a){var b=null;a=a||30;return function(){var c=this,g=arguments;!e.validate.isNull(b)&&clearTimeout(b);b=setTimeout(function(){e.validate.isFunction(d)&&d.apply(c,g)},a)}}});f.define("utils.throttle",function(e){return function(d,a){a||(a=160);var b=Date.now();return function(){var c=this,g=arguments;Date.now()-b>=a?(d.apply(c,g),b=Date.now()):setTimeout(function(){d.apply(c,g)},a)}}});f.define("utils.shuffle",function(e){return function(d){d=
d.slice();for(var a=0;a<d.length;a++){var b=this.getRandom(0,a),c=d[a];d[a]=d[b];d[b]=c}return d}});f.define("utils.getRandom",function(e){return function(d,a){return Math.floor(Math.random()*(a-d+1)+d)}});f.define("utils.trim",function(e){return function(d){return(d||"").replace(/^\s+|\s+$/g,"")}});f.define("utils.trimAll",function(e){return function(d){return(d||"").replace(/\s*/g,"")}});f.define("utils.delay",function(e){return function a(d,a){a=a||0;return new Promise(function(b){setTimeout(function(){e.validate.isFunction(d)&&
d();b()},a)})}});f.define("utils.filterScript",function(e){return function(d){return(d||"").replace(/<\s*script.*?>.*?<\/\s*script\s*>/gi,"")}});f.define("utils.createScript",function(e){return function(d){var a=document.createElement("script");a.type="text/javascript";try{a.appendChild(document.createTextNode(d))}catch(b){a.text=d}document.getElementsByTagName("head")[0].appendChild(a)}});f.define("utils.loadScript",function(e){return function(d,a,b){var c=document.createElement("script");c.type=
"text/javascript";c.async=!0;c.src=b?d+"?t="+Date.now():d;c.readyState?c.onreadystatechange=function(){("complete"==c.readyState||"loaded"==c.readyState)&&a&&a()}:c.onload=function(){a&&a()};document.getElementsByTagName("head")[0].appendChild(c)}});f.define("utils.createStyle",function(e){return function(d){var a=document.createElement("style");a.type="text/css";try{a.appendChild(document.createTextNode(d))}catch(b){a.styleSheet.cssText=d}document.getElementsByTagName("head")[0].appendChild(a)}});
f.define("utils.loadStyle",function(e){return function(d,a){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=a?d+"?t="+Date.now():d;document.getElementsByTagName("head")[0].appendChild(b)}});f.define("utils.tplFormat",function(e){return function(d,a){return(d||"").replace(/\{\{(\w+)\}\}/g,function(b,c){return e.validate.isUndefined(a[c])?"":a[c]})}});f.define("dialog",function(e){function d(b){this.$el=null;this.__uid__=++d._uid_;this.__builtin__=!0;var c=this.options=
this.initParams(a.dialog,b);Object.defineProperty(this,"parentClass",{configurable:!0,enumerable:!0,get:function(){var g=c.uiClass;g=g?g:a.namespace.uiClass;return c.parentClass||[a.namespace.parentClass,g,this.target.substring(1)]}});this.create()}var a={textDict:{title:"\u6e29\u99a8\u63d0\u793a",buttonConfirm:"\u786e\u8ba4",buttonCancel:"\u53d6\u6d88"},namespace:{uiClass:"pops--ui",parentClass:"pops",containerClass:"pops__wrapper",mainClass:"pops__main",headerClass:"pops__header",bodyClass:"pops__body",
headerFixClass:"pops__header--fix",maskClass:"pops__mask",textClass:"pops__text",prefixClass:"pops__prefix",suffixClass:"pops__suffix",footerClass:"pops__footer",mtClass:"pops__mt",buttonClass:"pops__btn",btnOkClass:"pops__btn__ok",btnIconClass:"pops__btn__icon",scrollbarClass:"pops__scrollbar",closeTarget:".jpopClose",popupTarget:".jpopup",selectClass:"pops__btn__select",btnCancelClass:"pops__btn__cancel"},dialog:{async:!1,scrollable:!0,maskClickable:!1,title:"",message:"",prefix:"",suffix:"",footer:"",
buttonText:"",showHeader:!0,showButton:!0,showClose:!0,zIndex:128,uiClass:"",onRender:function(b,c){},onBeforeMount:function(b,c){},onMounted:function(){},onDestroy:function(){},onBeforeClose:function(b){},onClose:function(){}}};d.prototype={constructor:d,close:function(b){function c(m,p){l||(k&&(m=f.$(m.currentTarget),m.hasClass(a.namespace.btnOkClass)&&p&&m.attr({disabled:null}).html(a.textDict.btnText)),f.validate.isFunction(h.onClose)&&h.onClose(),!h.async&&g.destroy())}var g=this,h=g.options,
l=!1,k=b&&b.currentTarget&&f.validate.isNode(b.currentTarget),n=f.validate.isFunction(h.onBeforeClose)&&h.onBeforeClose(f.$(b.currentTarget).attr("role"),function(){c(b,!1);l=!0});f.validate.isPromise(n)?(k&&f.$(b.currentTarget).attr({disabled:!0}).html('<svg version="1.1" id="svgLoading" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1em" height="1em" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><path fill="#fff" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg>'),
n.then(function(m){c(b,!0);l=!0;f.validate.isBoolean(m)&&m&&g.$el.fadeOut()})):(c(b,!1),g.$el.fadeOut())},destroy:function(){var b=this.options;this.$el.off("click",a.namespace.closeTarget,this.close.bind(this));this.$el.remove();f.validate.isFunction(b.onDestroy)&&b.onDestroy()},open:function(b){var c=this.options;b=f.validate.isObject(b)?b:{};this.options=f.extend(c,b);this._render_();this.$el.fadeIn()},create:function(){var b=this.options;f.validate.isFunction(b.onBeforeMount)&&b.onBeforeMount();
var c=f.utils.tagString("div",{class:this.parentClass,attr:{role:"dialog","aria-label":"dialog"}},[{type:"div",props:{class:[a.namespace.maskClass,b.maskClickable?a.namespace.closeTarget.substring(1):""],attr:{role:"mask"}}},{type:"div",props:{class:[a.namespace.containerClass],attr:{role:"wrapper","aria-label":"dialog wrapper"}}}]);c=this.$el=f.$(c).css({"z-index":b.zIndex});f.$(f.document).append(c);b.async?this._render_():this.open();c.on("click",a.namespace.closeTarget,this.close.bind(this))},
initParams:function(b,c){c=f.validate.isObject(c)?c:{};b=f.utils.deepClone(b);b=f.extend(b,c);this.target=b.target||a.namespace.popupTarget+this.__uid__;b.title=b.title||"\u6e29\u99a8\u63d0\u793a";return b},_render_:function(){var b=this.options,c=f.utils.tagString("div",{attr:{"data-feature":"animate",class:[a.namespace.mainClass]}},["{{closeIconHTML}}{{headerHTML}}",f.utils.tagString("div",{class:a.namespace.bodyClass},"{{prefixHTML}}{{contentHTML}}{{suffixHTML}}{{buttonHTML}}{{footerHTML}}")].join("")),
g=this._getHeaderUI_(b),h=this._getCloseIcon_(b),l=this._getPrefixUI_(b),k=this._getSuffixUI_(b),n=this._getButtonUI_(b),m=this._getFooterUI_(b),p=this._getContentUI_(b);c=f.utils.tplFormat(c,{closeIconHTML:h,headerHTML:g,prefixHTML:l,suffixHTML:k,contentHTML:p,buttonHTML:n,footerHTML:m});this.$el.attr("class",this.parentClass.join(" ")).find('[role="wrapper"]').html(c);f.validate.isFunction(b.onMounted)&&b.onMounted()},_getCloseIcon_:function(b){return!1===b.showClose?"":f.utils.tagString("div",
{class:[a.namespace.buttonClass,a.namespace.btnIconClass,a.namespace.closeTarget.substring(1)],attr:{role:"close","aria-label":"dialog close icon"}})},_getHeaderUI_:function(b){return!1===b.showHeader?"":f.utils.tagString("div",{class:a.namespace.headerClass},{type:"div",props:{class:a.namespace.headerFixClass,attr:{role:"header","aria-label":"dialog header"}},children:b.title})},_getPrefixUI_:function(b){return b.prefix?f.utils.tagString("div",{class:a.namespace.prefixClass,attr:{role:"prefix","aria-label":"dialog prefix"}},
b.prefix):""},_getSuffixUI_:function(b){return b.suffix?f.utils.tagString("div",{class:a.namespace.suffixClass,attr:{role:"suffix","aria-label":"dialog suffix"}},b.suffix):""},_getButtonUI_:function(b){return b.showButton?f.utils.tagString("div",{class:[a.namespace.buttonClass,a.namespace.btnOkClass,a.namespace.mtClass,a.namespace.closeTarget.substring(1)],attr:{role:"button","aria-label":"dialog confirm button"}},b.buttonText||a.textDict.buttonConfirm):""},_getFooterUI_:function(b){return b.footer?
f.utils.tagString("div",{class:[a.namespace.footerClass,a.namespace.mtClass]},b.footer):""},_getContentUI_:function(b){var c=b.message||"";c=f.validate.isFunction(c)?f.utils.filterScript(c()):c;return f.utils.tagString("div",{class:[a.namespace.textClass,b.scrollable?a.namespace.scrollbarClass:""],attr:{role:"content","aria-label":"dialog content"}},c)}};d._uid_=0;d.setConfig=function(b,c){!f.validate.isObject(c)&&f.validate.isUndefined(a[b])||f.extend(a[b],c)};return{setConfig:d.setConfig,create:function(b){return new d(b)}}});
f.define("button.verify",function(e){function d(a){a=e.validate.isObject(a)?a:{};this.target=e.validate.isNode(a.target)?a.target:document.querySelector(a.target);this.current=0;this.duration=e.validate.isNumber(a.duration)?a.duration:d.DEFAULT.duration;this.unit=a.unit||d.DEFAULT.unit;this.text=a.text||d.DEFAULT.text;this.textActive=a.textActive||d.DEFAULT.textActive;this.disableClass=a.disableClass||d.DEFAULT.disableClass;this.async=e.validate.isBoolean(a.async)?a.async:d.DEFAULT.async;this.onStart=
e.validate.isFunction(a.onStart)?a.onStart:d.DEFAULT.onStart;this.onComplete=e.validate.isFunction(a.onComplete)?a.onComplete:d.DEFAULT.onComplete;this.timer=null;this.running=this.listening=!1;!this.async&&this.listen()}d.prototype={constructor:d,destroy:function(){this.running=this.listening=!1;this.current=this.duration;clearTimeout(this.timer);this.target.removeEventListener("click",this._fn_,!1)},listen:function(){this.listening||(this.listening=!0,this.target.addEventListener("click",this._fn_.bind(this),
!1))},_fn_:function(){function a(){b.timer=setTimeout(function(){1==b.current?(clearTimeout(self.timer),b.running=!1,c.innerText=b.text,c.removeAttribute("disabled"),c.classList.remove(b.disableClass),c.style.cssText="",b.onComplete()):(--b.current,c.innerText=b.textActive+b.current+b.unit,a())},1E3)}var b=this;if(!b.running){b.running=!0;b.current=b.duration;clearTimeout(b.timer);var c=b.target;c.innerText=b.textActive+b.current+b.unit;c.setAttribute("disabled","disabled");c.classList.add(b.disableClass);
c.style.cssText+=";pointer-events: none;";b.onStart();a()}}};d.DEFAULT={async:!1,duration:60,unit:"s",text:"\u53d1\u9001\u9a8c\u8bc1\u7801",textActive:"\u5012\u8ba1\u65f6",disableClass:"disable",onStart:function(){},onComplete:function(){}};return function(a){return new d(a)}});f.define("checkPlugin",function(e){return function(d,a){return e.validate.isUndefined(d)?(console.warn("the plugin "+a+" is not defined"),!1):!0}});f.define("showToast",function(e){var d={openClass:"is-open",closeClass:"is-close",
target:".u-toasts__text",message:"",duration:1E3,outTime:200,zIndex:1E3};e.utils.createStyle("@-webkit-keyframes bounceIn{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes bounceIn{0%{opacity:0;-moz-transform:scale(.5);transform:scale(.5)}100%{opacity:1;-moz-transform:scale(1);transform:scale(1)}}@keyframes bounceIn{0%{opacity:0;transform:scale(.5)}100%{opacity:1;transform:scale(1)}}@-webkit-keyframes bounceOut{100%{opacity:0;-webkit-transform:scale(.7);transform:scale(.7)}30%{-webkit-transform:scale(1.05);transform:scale(1.05)}0%{-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes bounceOut{100%{opacity:0;-moz-transform:scale(.7);transform:scale(.7)}30%{-moz-transform:scale(1.05);transform:scale(1.05)}0%{-moz-transform:scale(1);transform:scale(1)}}@keyframes bounceOut{100%{opacity:0;transform:scale(.7)}30%{transform:scale(1.05)}0%{transform:scale(1)}}.u-toasts__box{display:none;position:fixed;top:30%;left:50%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);white-space:nowrap;z-index:1000}.u-toasts__box .u-toasts__text{display:inline-block;padding:.8em 1.2em;font-size:18px;-webkit-box-shadow:#000 0 0 2px;box-shadow:#000 0 0 2px;background-color:#000;background-color:rgba(0,0,0,.6);color:#fff}.u-toasts__box.is-open{display:block}.u-toasts__box.is-open .u-toasts__text{-webkit-animation:bounceIn .2s ease-in both;-moz-animation:bounceIn .2s ease-in both;animation:bounceIn .2s ease-in both}.u-toasts__box.is-close{display:block}.u-toasts__box.is-close .u-toasts__text{-webkit-animation:bounceOut .2s ease-in both;-moz-animation:bounceOut .2s ease-in both;animation:bounceOut .2s ease-in both}");
return function(a,b){var c=e.utils.deepClone(d);e.validate.isObject(a)?c=e.extend(c,a):(b=e.validate.isObject(b)?b:{},c=e.extend(c,b),c.message=a);var g=$('<div class="u-toasts__box" id="sysToasts"><span class="u-toasts__text"></span></div>');e.$(e.document).append(g);g.css({zIndex:c.zIndex}).addClass(c.openClass).removeClass(c.closeClass).find(c.target).text(c.message);e.utils.delay(function(){g.addClass(c.closeClass).removeClass(c.openClass)},c.duration).then(function(){e.utils.delay(function(){g.removeClass(c.closeClass);
g.remove()},c.outTime)})}});f.define("Loading",function(e){function d(a){this.opts=a=a||{duration:0};this.doc=document.documentElement.body||document.body;this.target=a.target||this.doc;this.text=a.text||"\u52a0\u8f7d\u4e2d...";this.background=a.background||"";this.color=a.color||"";this.zIndex="number"===typeof a.zIndex?a.zIndex:200;this.duration="number"===typeof a.duration?a.duration:3E3;this.icon=a.icon||'<svg version="1.1" id="icoLoader" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><path fill="#fff" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg>';
this.style=";z-index:"+this.zIndex;this.style+=";position:"+("BODY"===this.target.tagName?"fixed":"relative");this.color&&(this.style+=";color:"+this.color);this.$loading=document.createElement("div");this.$loading.style.cssText=this.style;this.$loading.className="u__loading__unit";this._style_();this._init_();this._event_()}d.prototype={constructor:d,stop:function(){this.$loading.remove();this.doc.className=this.doc.className.replace(/u__loading__parent/g,"")},_style_:function(){if(!document.getElementById("u__loading__style")){var a=
document.documentElement.head||document.head,b=document.createElement("style");b.id="u__loading__style";b.textContent=".u__loading__parent{position:relative;overflow:hidden;}.u__loading__unit{position: absolute;top: 0;left: 0;right: 0;bottom: 0;display: -webkit-box;display: -webkit-flex;display: -moz-box;display: -ms-flexbox;display: flex;-webkit-box-pack: center;-webkit-justify-content: center;-moz-box-pack: center;-ms-flex-pack: center;justify-content: center;-webkit-box-align: center;-webkit-align-items: center;-moz-box-align: center;-ms-flex-align: center;align-items: center;-webkit-box-orient: vertical;-webkit-box-direction: normal;-webkit-flex-direction: column;-moz-box-orient: vertical;-moz-box-direction: normal;-ms-flex-direction: column;flex-direction: column;text-align:center;line-height:2;}.u__loading__box{padding: 1em 2em;border-radius:1em;background:rgba(0,0,0,.6);color:#fff};";
a.appendChild(b)}},_init_:function(){var a=this,b=document.createDocumentFragment(),c=document.createElement("div");c.className="u__loading__box";a.background&&(c.style.background=a.background);b.appendChild(c);var g=document.createElement("div");g.className="u__loading__icon";g.innerHTML=a.icon;c.appendChild(g);g=document.createElement("div");g.className="u__loading__text";g.innerHTML=a.text;c.appendChild(g);a.$loading.appendChild(b);a.target.appendChild(a.$loading);a.doc.className+=a.doc.className+
"u__loading__parent";0!==a.duration&&setTimeout(function(){a.stop()},a.duration)},_event_:function(){var a=this;$(a.target).on("stop",function(){a.stop()})}};return function(a){return new d(a)}});f.define("onClipboard",function(e){return function(d,a,b){if(e.checkPlugin(window.ClipboardJS,"ClipboardJS"))return d=new ClipboardJS(d),d.on("success",function(c){e.validate.isFunction(a)?a(c):e.showToast("\u590d\u5236\u6210\u529f")}),d.on("error",function(c){e.validate.isFunction(b)?b(c):e.showToast("\u590d\u5236\u5931\u8d25\uff0c\u8bf7\u624b\u52a8\u590d\u5236")}),
d}});f.define("navTo",function(e){return function(d,a,b){b=b||".jy-section";a=a||"active";$(d).addClass(a).siblings(b).removeClass(a)}});q.JTool=q._JTool_=f}(window,document);

/* DialogJS工厂函数 */
window.DialogJS = window._DialogJS_ = {
  style: { zIndexRecord: 100, zIndexForm: 128 },
  namespace: {
    // 元素类名
    uiClass: "pops--ui" /* 模态框--ui类名 */,
    parentClass: "pops" /* 模态框--父类名 */,
    containerClass: "pops__wrapper" /* 模态框--包装类名 */,
    mainClass: "pops__main" /* 模态框--主盒类名 */,
    headerClass: "pops__header" /* 模态框--头部内容类名 */,
    bodyClass: "pops__body" /* 模态框--主体内容类名 */,
    headerFixClass: "pops__header--fix" /* 模态框--头部装饰类名 */,
    maskClass: "pops__mask" /* 模态框--蒙罩类名 */,
    textClass: "pops__text" /* 模态框--通用文本类名 */,
    prefixClass: "pops__prefix" /* 模态框--前缀文本类名 */,
    suffixClass: "pops__suffix" /* 模态框--后缀文本类名 */,
    footerClass: "pops__footer" /* 模态框--页脚文本类名 */,
    mtClass: "pops__mt" /* 模态框--元素间边距类名 */,
    buttonClass: "pops__btn" /* 模态框--公共按钮类名 */,
    btnLinkClass: "pops__link" /* 模态框--链接按钮类名 */,
    btnOkClass: "pops__btn__ok" /* 模态框--确认按钮类名 */,
    btnIconClass: "pops__btn__icon" /* 模态框--关闭图标元素类名 */,
    btnVerifyClass: "pops__btn__ac" /* 模态框--获取验证码类名 */,
    btnCopyClass: "jBtnPopCode" /* 模态框--复制元素类名 */,
    scrollbarClass: "pops__scrollbar" /* 模态框--滚动元素类名 */,
    // module pops__grid
    gridTrClass: "pops__grid__tr" /* 模态框--表格行元素类名 */,
    gridTdClass: "pops__grid__td" /* 模态框--表格单元格元素类名 */,

    /* 元素交互ID */
    closeTarget: ".jpopClose" /* 模态框--关闭ID */,
    btnCallCodeTarget: ".jpopBtnCallCode" /* 模态框--我的奖励-礼品查看ID */,
    btnCallBindTarget: ".jpopBtnCallBind" /* 模态框--我的奖励-待领取绑定游戏信息ID */,
    btnCallUinfoTarget: ".jpopBtnCallUinfo" /* 模态框--我的奖励-填写个人信息ID */,
    // 内置模态框特定类名
    popupTarget: ".jpopup" /* 公共模态框ID */,
    popupRecordTarget: ".jpopRecord" /* 我的奖励ID */,

    popupHintTarget: ".jpopHint" /* 温馨提示ID */,
    popupCodeTarget: ".jpopCode" /* 温馨提示ID */,
    popupBindTarget: ".jpopBind" /* 绑定游戏ID */,
    popupUinfoTarget: ".jpopUinfo" /* 个人信息ID */,
    popupFormsTarget: ".jpopForm" /* 表单ID */,

    /* 预留类名 */
    selectClass: "pops__btn__select" /* 模态框--select元素类名 */,
    btnCancelClass: "pops__btn__cancel" /* 模态框--关闭按钮类名 */,
  },
  textDict: {
    codeTitle: "恭喜获得礼包码" /* 我的礼包标题 */,
    prizeTitle: "我的奖励" /* 我的奖励标题 */,
    bindTitle: "请绑定角色" /* 绑定游戏标题 */,
    uinfoTitle: "个人信息" /* 个人信息标题 */,
    buttonCode: "一键复制" /* 复制按钮 */,
    buttonGetCode: "获取验证码" /* 获取验证码按钮 */,
    button2Bind: "绑定游戏" /* 我的奖励-待领取绑定游戏信息 */,
    button2Uinfo: "填写信息" /* 我的奖励-填写个人信息 */,
    button2Code: "去领取" /* 我的奖励-礼品查看 */,
  },
  _uid_: 0,
  setConfig: _JTool_.dialog.setConfig,
  diy: function (opts) {
    return _JTool_.dialog.create(opts);
  },
  forms: function (opts) {
    var _this = this,
      params = _JTool_.validate.isObject(opts) ? opts : {};
    params.target = opts.target || _this.namespace.popupFormsTarget;
    params.title = params.title || _this.textDict.title;
    params.zIndex = _JTool_.validate.isNumber(params.zIndex) ? params.zIndex : _this.style.zIndexForm;
    params.data = _JTool_.validate.isArray(params.data) ? params.data : [];

    // 模态框-input控制模板
    var inputTpl = [
        '<div class="pops__control__cells">',
        '<label for="{{id}}" class="pops__cell pops__control">',
        '<div class="pops__cell__hd"><span class="pops__control--label">{{label}}</span></div>',
        '<div class="pops__cell__bd">',
        '<input id="{{id}}" class="pops__control--input" type="text" placeholder="{{placeholder}}" value="{{value}}" maxlength="{{maxLength}}" data-key="{{key}}">',
        '<button class="pops__btn pops__control--clear"></button>',
        "</div>",
        "{{extral}}",
        "</label>",
        "</div>",
      ].join(""),
      // 模态框-select控制模板
      selectTpl = [
        '<div class="pops__control__cells">',
        '<label for="{{id}}" class="pops__cell pops__control" >',
        '<div class="pops__cell__hd"><span class="pops__control--label">{{label}}</span></div>',
        '<div class="pops__cell__bd">',
        '<select class="pops__control--select" data-key="{{key}}" name="{{id}}" id="{{id}}">{{children}}</select>',
        "</div>",
        "</label>",
        "</div>",
      ].join("");

    var formsUI = "";
    params.data.forEach(function (value, index) {
      var type = value.type;
      var id = value.type + (value.id || ++_this._uid_);
      switch (type) {
        case "select":
          var config = _JTool_.$.extend(value, {
            type: "select",
            id: value.id || id,
            key: value.key || id,
            label: value.label,
            value: value.value || "",
            placeholder: value.placeholder || "请选择",
            children: value.data || [],
          });
          var optionStr = "";
          _JTool_.validate.isArray(config.children) &&
            config.children.forEach(function (item) {
              optionStr += _JTool_.utils.tagString(
                "option",
                { attr: { value: item.id, disabled: item.disabled } },
                item.text
              );
            });
          config.children = optionStr;
          formsUI += _JTool_.utils.tplFormat(selectTpl, config);
          break;
        case "input":
          var config = _JTool_.$.extend(value, {
            type: "input",
            id: value.id || id,
            key: value.key || id,
            maxLength: value.maxLength || 16,
            label: value.label,
            value: value.value || "",
            placeholder: value.placeholder || "请选择",
          });
          formsUI += _JTool_.utils.tplFormat(inputTpl, config);
          break;
        case "code":
          var btnVerify = _JTool_.utils.tagString(
            "button",
            {
              class: [_this.namespace.btnVerifyClass, _this.namespace.buttonClass],
              attr: { role: "button", "aria-label": "verfiy button" },
            },
            value.buttonText || _this.textDict.buttonGetCode
          );
          var config = _JTool_.$.extend(value, {
            type: "input",
            id: value.id || id,
            key: value.key || id,
            maxLength: value.maxLength || 16,
            label: value.label,
            value: value.value || "",
            placeholder: value.placeholder || "请选择",
            duration: value.duration || 60,
            extral: btnVerify,
          });
          formsUI += _JTool_.utils.tplFormat(inputTpl, config);
          break;

        default:
          break;
      }
    });
    params.message = formsUI;

    return _this.diy(params);
  },
  code: function (opts) {
    var _this = this,
      params = _JTool_.validate.isObject(opts) ? opts : {};
    params.target = opts.target || _this.namespace.popupCodeTarget;
    params.title = params.title || _this.textDict.codeTitle;

    var btnUI = _JTool_.utils.tagString(
        "div",
        {
          class: [_this.namespace.btnOkClass, _this.namespace.btnCopyClass, _this.namespace.closeTarget.substring(1)],
          attr: { "data-clipboard-text": params.message, role: "button", "aria-label": "dialog code button" },
        },
        _this.textDict.buttonCode
      ),
      codeTpl = '<div class="pops__cell pops__control"><div class="pops__code">{{code}}</div>{{btn}}</div>';
    params.message = _JTool_.utils.tplFormat(codeTpl, { code: params.message, btn: btnUI });

    return _this.diy(params);
  },
  /**
   * @description: 绑定用户表单弹窗
   * @param {object} opts 配置
   * @return {object}
   * @author: liejiayong(809206619@qq.com)
   * @Date: 2023-02-17 11:58:20
   */
  bind: function (opts) {
    var _this = this,
      params = _JTool_.validate.isObject(opts) ? opts : {};
    params.target = opts.target || _this.namespace.popupBindTarget;
    params.title = params.title || _this.textDict.bindTitle;
    params.scrollable = false;

    return _this.forms(params);
  },
  /**
   * @description: 用户信息表单弹窗
   * @param {object} opts 配置
   * @return {object}
   * @author: liejiayong(809206619@qq.com)
   * @Date: 2023-02-17 11:58:20
   */
  uinfo: function (opts) {
    var _this = this,
      params = _JTool_.validate.isObject(opts) ? opts : {};
    params.target = opts.target || _this.namespace.popupUinfoTarget;
    params.title = params.title || _this.textDict.uinfoTitle;
    params.scrollable = false;

    return _this.forms(params);
  },
  /**
   * @description: 我的奖励弹窗
   * @param {object} opts 配置
   * @return {object}
   * @author: liejiayong(809206619@qq.com)
   * @Date: 2023-02-16 14:19:07
   */
  record: function (opts) {
    var _this = this,
      params = _JTool_.validate.isObject(opts) ? opts : {};
    params.target = opts.target || _this.namespace.popupRecordTarget;
    params.title = params.title || _this.textDict.prizeTitle;
    params.showColumn = _JTool_.validate.isBoolean(params.showColumn)
      ? params.showColumn
      : true; /* 是否显示右上角关闭按钮 */
    params.scrollable = _JTool_.validate.isBoolean(params.scrollable) ? params.scrollable : false;
    params.zIndex = params.zIndex || _this.style.zIndexRecord;
    !_JTool_.validate.isArray(params.column) && (params.column = []);
    !_JTool_.validate.isArray(params.data) && (params.data = []);

    var messageUI = params.message;
    if (!messageUI) {
      function initUI() {
        var trTpl = _JTool_.utils.tagString(
            "div",
            {
              class: _this.namespace.gridTrClass,
            },
            "{{data}}"
          ),
          tdTpl = _JTool_.utils.tagString(
            "div",
            {
              class: _this.namespace.gridTdClass,
            },
            "{{data}}"
          );
        // table header ui
        var headerUI = "";

        if (params.showColumn) {
          params.column.forEach(function (val) {
            headerUI += _JTool_.utils.tplFormat(tdTpl, { data: val.label });
          });
          headerUI = _JTool_.utils.tplFormat(trTpl, { data: headerUI });
        }

        // table bodyer ui
        var bodyTrUI = "";
        params.data.forEach(function (value, index) {
          var bodyTdStr = "";
          params.column.forEach(function (head) {
            var data = value[head.prop] || "",
              /* 
              action 和 render 均为渲染模式二选一。
              优先级：render > action。

              action：为内置模板渲染
              render：为根据实际情况渲染，其中render函数接受参数为当前字段数据params，数据下标index
            */
              keyType = value[head.action],
              _render_ = head.render;

            if (_render_ && _JTool_.validate.isFunction(_render_)) {
              var str = _render_(value, index);
              str = _JTool_.validate.isString(str) ? str : "";
              data = _JTool_.utils.filterScript(str);
            } else {
              // if text、button or other type
              switch (keyType) {
                // if buttonUserinfo
                case "buttonUserinfo":
                  data = _JTool_.utils.tagString(
                    "div",
                    {
                      class: [_this.namespace.btnLinkClass, _this.namespace.btnCallUinfoTarget.substring(1)],
                      attr: {
                        role: "button",
                        "aria-label": "userinfo dialog",
                        "data-target": _this.namespace.btnCallUinfoTarget,
                      },
                    },
                    _this.textDict.button2Uinfo
                  );
                  break;
                // if buttonBind
                case "buttonBind":
                  data = _JTool_.utils.tagString(
                    "div",
                    {
                      class: [_this.namespace.btnLinkClass, _this.namespace.btnCallBindTarget.substring(1)],
                      attr: {
                        role: "button",
                        "aria-label": "bind dialog",
                        "data-target": _this.namespace.btnCallBindTarget,
                      },
                    },
                    _this.textDict.button2Bind
                  );
                  break;
                // if buttonCode
                case "buttonCode":
                  data = _JTool_.utils.tagString(
                    "div",
                    {
                      class: [_this.namespace.btnLinkClass, _this.namespace.btnCallCodeTarget.substring(1)],
                      attr: {
                        role: "button",
                        "aria-label": "code dialog",
                        "data-target": _this.namespace.btnCallCodeTarget,
                      },
                    },
                    _this.textDict.button2Code
                  );
                  break;
                // if copy
                case "copy":
                  data = _JTool_.utils.tagString(
                    "div",
                    {
                      class: [_this.namespace.btnLinkClass, _this.namespace.btnCopyClass],
                      attr: {
                        role: "button",
                        "aria-label": "copy button",
                        "data-clipboard-text": _JTool_.utils.trimAll(data),
                      },
                    },
                    value[head.prop]
                  );
                  break;

                // or other
                default:
                  data = value[head.prop];
                  break;
              }
            }

            // each Td element string
            bodyTdStr += _JTool_.utils.tplFormat(tdTpl, {
              data: data,
            });
          });
          bodyTrUI += _JTool_.utils.tplFormat(trTpl, { data: bodyTdStr });
        });

        var recordTpl = [
          '<div class="pops__grid pops__grid--stripes">',
          '<div class="pops__grid__thead">{{headerHTML}}</div>',
          '<div class="pops__grid__tbody">{{bodyerHTML}}</div>',
          "</div>",
        ].join("");
        messageUI = _JTool_.utils.tplFormat(recordTpl, {
          headerHTML: headerUI,
          bodyerHTML: bodyTrUI,
        });

        return messageUI;
      }

      params.message = initUI;
    }
    return _this.diy(params);
  },
};
